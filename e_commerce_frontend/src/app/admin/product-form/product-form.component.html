<!-- src/app/products/product-form/product-form.component.html -->
<div class="container mt-4">
  <h2>{{ isEditMode ? 'Edit Product' : 'Create New Product' }}</h2>

  <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col-md-6">
        <div class="mb-3">
          <label for="name" class="form-label">Name</label>
          <input type="text" class="form-control" id="name" formControlName="name"
            [class.is-invalid]="productForm.get('name')?.invalid && productForm.get('name')?.touched">
          <div *ngIf="productForm.get('name')?.invalid && productForm.get('name')?.touched" class="invalid-feedback">
            <div *ngIf="productForm.get('name')?.errors?.['required']">Name is required</div>
            <div *ngIf="productForm.get('name')?.errors?.['minlength']">Name must be at least 2 characters</div>
            <div *ngIf="productForm.get('name')?.errors?.['maxlength']">Name cannot exceed 100 characters</div>
          </div>
        </div>

        <div class="mb-3">
          <label for="description" class="form-label">Description</label>
          <textarea class="form-control" id="description" rows="3" formControlName="description"
            [class.is-invalid]="productForm.get('description')?.invalid && productForm.get('description')?.touched"></textarea>
          <div *ngIf="productForm.get('description')?.invalid && productForm.get('description')?.touched"
            class="invalid-feedback">
            <div *ngIf="productForm.get('description')?.errors?.['required']">Description is required</div>
            <div *ngIf="productForm.get('description')?.errors?.['minlength']">Description must be at least 5 characters
            </div>
            <div *ngIf="productForm.get('description')?.errors?.['maxlength']">Description cannot exceed 500 characters
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="mb-3">
          <label for="price" class="form-label">Price</label>
          <div class="input-group">
            <span class="input-group-text">$</span>
            <input type="number" class="form-control" id="price" step="0.01" min="0.01" formControlName="price"
              [class.is-invalid]="productForm.get('price')?.invalid && productForm.get('price')?.touched">
          </div>
          <div *ngIf="productForm.get('price')?.invalid && productForm.get('price')?.touched" class="invalid-feedback">
            <div *ngIf="productForm.get('price')?.errors?.['required']">Price is required</div>
            <div *ngIf="productForm.get('price')?.errors?.['min']">Price must be at least $0.01</div>
          </div>
        </div>

        <div class="mb-3">
          <label for="quantity" class="form-label">Quantity</label>
          <input type="number" class="form-control" id="quantity" min="0" formControlName="quantity"
            [class.is-invalid]="productForm.get('quantity')?.invalid && productForm.get('quantity')?.touched">
          <div *ngIf="productForm.get('quantity')?.invalid && productForm.get('quantity')?.touched"
            class="invalid-feedback">
            <div *ngIf="productForm.get('quantity')?.errors?.['required']">Quantity is required</div>
            <div *ngIf="productForm.get('quantity')?.errors?.['min']">Quantity cannot be negative</div>
          </div>
        </div>

        <div class="mb-3">
          <label for="category" class="form-label">Category</label>
          <input type="text" class="form-control" id="category" formControlName="category"
            [class.is-invalid]="productForm.get('category')?.invalid && productForm.get('category')?.touched">
          <div *ngIf="productForm.get('category')?.invalid && productForm.get('category')?.touched"
            class="invalid-feedback">
            Category is required
          </div>
        </div>

        <div class="mb-3">
          <label for="sku" class="form-label">SKU</label>
          <input type="text" class="form-control" id="sku" formControlName="sku"
            [class.is-invalid]="productForm.get('sku')?.invalid && productForm.get('sku')?.touched">
          <div *ngIf="productForm.get('sku')?.invalid && productForm.get('sku')?.touched" class="invalid-feedback">
            SKU is required
          </div>
        </div>
      </div>
    </div>

    <div class="d-flex justify-content-end gap-2">
      <button type="button" class="btn btn-secondary" (click)="onCancel()">Cancel</button>
      <button type="submit" class="btn btn-primary" [disabled]="productForm.invalid || isLoading">
        <span *ngIf="isLoading" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
        {{ isEditMode ? 'Update' : 'Create' }}
      </button>
    </div>
  </form>
</div>